<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html
    xmlns:ui="jakarta.faces.facelets"
    xmlns:f="jakarta.faces.core"
    xmlns:p="http://primefaces.org/ui">
    <ui:composition
        xmlns="http://www.w3.org/1999/xhtml"
        template="/paie/templates/layout-edit.xhtml">

        <ui:define name="metadata">
            <f:metadata>
                <f:viewParam name="entityId" value="#{memberBean.entityId}"/>
                <f:viewAction action="#{memberBean.initEntity()}"/>
            </f:metadata>
        </ui:define>

        <ui:param name="crudBean" value="#{memberBean}"/>

        <ui:param name="fieldsTitle" value="#{msg['member']}"/>

        <ui:define name="list-title">
            #{msg['members.edit.title']}
        </ui:define>
        <ui:define name="breadCrumb">
            #{msg['members.breadCrumb']}
        </ui:define>
        <!--        <ui:insert name="fields">
                    <p:fieldset legend="#{fieldsTitle}">
                        <div class="form-grid grid ui-fluid">
                            <ui:insert name="fields-content"/>
                        </div>
                    </p:fieldset>
                </ui:insert>-->
        <ui:define name="fields">
            <p:fieldset legend="#{fieldsTitle}">
                <p:fieldset>
                    <div class="form-grid grid ui-fluid">
                        <div class="field sm:col-12 col-12 md:col-4 lg:col-4">
                            <p:outputLabel for="eglise" value="#{msg['entites.eglise.title']}"/>
                            <p:selectOneMenu id="eglise" class="w-full" filterMatchMode="startsWith"
                                             filterNormalize="true" filter="true" filterPlaceholder="#{msg['search']}"
                                             converter="omnifaces.SelectItemsConverter"
                                             value="#{memberBean.entity.eglise}">
                                <f:selectItem noSelectionOption="true" itemLabel="#{msg['choice-label']}"/>
                                <f:selectItems value="#{memberBean.listEglises()}" itemValue="#{s}" var="s" itemLabel="#{s.label}"/>
                                <p:ajax update="person"/>
                            </p:selectOneMenu>
                        </div>
                        <div class="field sm:col-12 col-12 md:col-4 lg:col-4">
                            <p:outputLabel for="dpt" value="#{msg['departement.title']}"/>
                            <p:selectOneMenu id="dpt" class="w-full" filterMatchMode="startsWith"
                                             filterNormalize="true" filter="true" filterPlaceholder="#{msg['search']}"
                                             converter="omnifaces.SelectItemsConverter"
                                             value="#{memberBean.department}">
                                <f:selectItem noSelectionOption="true" itemLabel="#{msg['choice-label']}"/>
                                <f:selectItems value="#{memberBean.listDepartments()}" itemValue="#{s}" var="s" itemLabel="#{s.label}"/>
                                <p:ajax update="person"/>
                            </p:selectOneMenu>
                        </div>

                        <div class="field sm:col-12 col-12 md:col-4 lg:col-4">
                            <p:outputLabel for="sexe" value="#{msg['references.sexe.title']}"/>
                            <p:selectOneMenu id="sexe" class="w-full" filterMatchMode="startsWith"
                                             filterNormalize="true" filter="true" filterPlaceholder="#{msg['search']}"
                                             converter="omnifaces.SelectItemsConverter"
                                             value="#{memberBean.sexe}">
                                <f:selectItem noSelectionOption="true" itemLabel="#{msg['choice-label']}"/>
                                <f:selectItems value="#{memberBean.listSexes()}" itemValue="#{s}" var="s" itemLabel="#{s.label}"/>
                                <p:ajax update="person"/>
                            </p:selectOneMenu>
                        </div>

                        <div class="field sm:col-12 col-12 md:col-6 lg:col-6">
                            <p:outputLabel for="person" value="#{msg['person.title']}"/>
                            <p:selectOneMenu id="person" class="w-full" filterMatchMode="startsWith"
                                             filterNormalize="true" filter="true" filterPlaceholder="#{msg['search']}"
                                             converter="omnifaces.SelectItemsConverter"
                                             dynamic="true"
                                             value="#{memberBean.entity.person}">
                                <f:selectItem noSelectionOption="true" itemLabel="#{msg['choice-label']}"/>
                                <f:selectItems value="#{memberBean.listPersons()}" itemValue="#{p}" var="p" itemLabel="#{p.getFullName()}"/>
                            </p:selectOneMenu>
                        </div>
                        <div class="field sm:col-12 col-12 md:col-6 lg:col-6">
                            <p:outputLabel value="#{msg['members.edit.nummember']}" for="numMember"/>
                            <p:inputText id="numMember" class="w-full"
                                         value="#{memberBean.entity.memberNumber}"
                                         disabled="true"/>
                        </div>
                        <div class="field col-12">
                            <p:outputLabel value="#{msg['person.title']}" for="person1"/>
                            <p:autoComplete id="person1" converter="omnifaces.SelectItemsConverter"
                                            value="#{memberBean.entity.person}"
                                            var="p" itemLabel="#{p.getFullName()}" itemValue="#{p}"
                                            completeMethod="#{memberBean.listPersons2}"
                                            >
                            </p:autoComplete>
                        </div> 
                        <div class="p-2 field">
                            <p:commandButton value="Ajouter" icon="pi pi-plus"/>
                        </div>
                    </div>
                </p:fieldset>
                <ui:fragment>
                    <p:fieldset class="mt-3">
                        <div class="form-grid grid ui-fluid">
                            <p:dataTable >
                                <p:column headerText="#{msg['members.edit.nummember']}"/>
                                <p:column headerText="#{msg['person.title']}"/>
                                <p:column headerText="#{msg['entites.eglise.title']}"/>
                            </p:dataTable>
                        </div>
                    </p:fieldset> 
                </ui:fragment>
            </p:fieldset>
        </ui:define>
    </ui:composition>
</html>

